2025-05-26 11:29:26.236 | INFO     | visualization.test_d3_with_memory_data:test_visualization_with_real_data:39 - Connected to database: pizza_test
2025-05-26 11:29:26.236 | INFO     | visualization.test_d3_with_memory_data:test_visualization_with_real_data:42 - 
=== Checking available data ===
2025-05-26 11:29:26.242 | INFO     | visualization.test_d3_with_memory_data:test_visualization_with_real_data:51 - agent_relationships: 2 documents
2025-05-26 11:29:26.245 | INFO     | visualization.test_d3_with_memory_data:test_visualization_with_real_data:51 - episodes: 3 documents
2025-05-26 11:29:26.248 | INFO     | visualization.test_d3_with_memory_data:test_visualization_with_real_data:51 - agent_memories: 2 documents
2025-05-26 11:29:26.248 | INFO     | visualization.test_d3_with_memory_data:test_visualization_with_real_data:58 - 
=== Testing CLI visualization generation ===
2025-05-26 11:29:26.248 | INFO     | arangodb.visualization.core.performance_optimizer:__init__:55 - PerformanceOptimizer initialized
2025-05-26 11:29:26.248 | INFO     | arangodb.visualization.core.d3_engine:__init__:116 - Performance optimizer initialized
2025-05-26 11:29:26.248 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:26.250 | INFO     | visualization.test_d3_with_memory_data:test_visualization_with_real_data:125 - Formatted graph: 0 nodes, 0 links
2025-05-26 11:29:26.250 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.250 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.250 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.251 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 0 nodes
2025-05-26 11:29:26.251 | INFO     | visualization.test_d3_with_memory_data:test_visualization_with_real_data:145 - ✅ Generated visualization: visualizations/memory_bank_graph.html
2025-05-26 11:29:26.491 | INFO     | visualization.test_d3_with_memory_data:test_visualization_server:163 - 
=== Testing Visualization Server ===
2025-05-26 11:29:26.638 | INFO     | arangodb.visualization.server.visualization_server:<module>:99 - Redis connection established
2025-05-26 11:29:26.638 | INFO     | arangodb.visualization.core.llm_recommender:__init__:51 - LLMRecommender initialized with model: vertex_ai/gemini-2.5-flash-preview-04-17
2025-05-26 11:29:26.638 | INFO     | arangodb.visualization.core.d3_engine:__init__:106 - LLM recommender initialized
2025-05-26 11:29:26.639 | INFO     | arangodb.visualization.core.performance_optimizer:__init__:55 - PerformanceOptimizer initialized
2025-05-26 11:29:26.639 | INFO     | arangodb.visualization.core.d3_engine:__init__:116 - Performance optimizer initialized
2025-05-26 11:29:26.639 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:26.642 | INFO     | visualization.test_d3_with_memory_data:test_visualization_server:168 - ✅ Visualization server module imported successfully
2025-05-26 11:29:26.656 | INFO     | visualization.test_d3_with_memory_data:test_visualization_server:178 - ✅ Server root endpoint accessible
2025-05-26 11:29:26.658 | INFO     | visualization.test_d3_with_memory_data:test_visualization_server:184 - ✅ Available layouts: ['force', 'tree', 'radial', 'sankey']
2025-05-26 11:29:26.660 | INFO     | arangodb.visualization.core.llm_recommender:__init__:51 - LLMRecommender initialized with model: vertex_ai/gemini-2.5-flash-preview-04-17
2025-05-26 11:29:26.660 | INFO     | arangodb.visualization.core.d3_engine:__init__:106 - LLM recommender initialized
2025-05-26 11:29:26.660 | INFO     | arangodb.visualization.core.performance_optimizer:__init__:55 - PerformanceOptimizer initialized
2025-05-26 11:29:26.660 | INFO     | arangodb.visualization.core.d3_engine:__init__:116 - Performance optimizer initialized
2025-05-26 11:29:26.660 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:26.664 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.664 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.664 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.664 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 20 nodes
2025-05-26 11:29:26.665 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.665 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.665 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.665 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 50 nodes
2025-05-26 11:29:26.665 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.666 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.666 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.666 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 100 nodes
2025-05-26 11:29:26.667 | INFO     | arangodb.visualization.core.data_transformer:transform_graph_data:78 - Transforming ArangoDB data to D3.js format
2025-05-26 11:29:26.667 | INFO     | arangodb.visualization.core.data_transformer:transform_graph_data:122 - Transformed 5 nodes and 5 links
2025-05-26 11:29:26.667 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.667 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.667 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.667 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 5 nodes
2025-05-26 11:29:26.678 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:33 - Connected to pizza_test database
2025-05-26 11:29:26.678 | INFO     | arangodb.visualization.core.performance_optimizer:__init__:55 - PerformanceOptimizer initialized
2025-05-26 11:29:26.678 | INFO     | arangodb.visualization.core.d3_engine:__init__:116 - Performance optimizer initialized
2025-05-26 11:29:26.678 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:26.678 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:43 - 
=== Test 1: Pizza Ingredients Network ===
2025-05-26 11:29:26.681 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:78 - Pizza network: 14 nodes, 13 links
2025-05-26 11:29:26.682 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.682 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.682 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.682 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 14 nodes
2025-05-26 11:29:26.683 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:92 - ✅ Generated: visualizations/pizza_test/pizza_ingredients_network.html
2025-05-26 11:29:26.683 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:95 - 
=== Test 2: Customer Order Flow ===
2025-05-26 11:29:26.685 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:127 - Order flow: 11 nodes, 10 links
2025-05-26 11:29:26.685 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.685 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.685 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.686 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 11 nodes
2025-05-26 11:29:26.686 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:140 - ✅ Generated: visualizations/pizza_test/customer_order_flow.html
2025-05-26 11:29:26.686 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:143 - 
=== Test 3: Pizza Category Tree ===
2025-05-26 11:29:26.688 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:162 - Category tree: 4 nodes, 8 links
2025-05-26 11:29:26.688 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.688 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.688 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.688 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 4 nodes
2025-05-26 11:29:26.688 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:176 - ✅ Generated: visualizations/pizza_test/pizza_category_tree.html
2025-05-26 11:29:26.689 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:179 - 
=== Test 4: Review Network ===
2025-05-26 11:29:26.690 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:217 - Review network: 6 nodes, 3 links
2025-05-26 11:29:26.690 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.690 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.691 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.691 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 6 nodes
2025-05-26 11:29:26.691 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:231 - ✅ Generated: visualizations/pizza_test/pizza_reviews_network.html
2025-05-26 11:29:26.912 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:236 - 
✅ All visualizations generated in: visualizations/pizza_test
2025-05-26 11:29:26.913 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:237 - 
The D3 visualization system is working correctly!
2025-05-26 11:29:26.913 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:238 - It can deliver graphs through:
2025-05-26 11:29:26.913 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:239 -   1. Direct API calls (as shown above)
2025-05-26 11:29:26.913 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:240 -   2. CLI commands: uv run python -m arangodb.cli visualize generate <query>
2025-05-26 11:29:26.913 | INFO     | visualization.test_pizza_d3:test_pizza_visualizations:241 -   3. Visualization server: uv run python -m arangodb.cli visualize server
2025-05-26 11:29:26.915 | INFO     | arangodb.visualization.core.llm_recommender:__init__:51 - LLMRecommender initialized with model: vertex_ai/gemini-2.5-flash-preview-04-17
2025-05-26 11:29:26.915 | INFO     | arangodb.visualization.core.d3_engine:__init__:106 - LLM recommender initialized
2025-05-26 11:29:26.915 | INFO     | arangodb.visualization.core.performance_optimizer:__init__:55 - PerformanceOptimizer initialized
2025-05-26 11:29:26.915 | INFO     | arangodb.visualization.core.d3_engine:__init__:116 - Performance optimizer initialized
2025-05-26 11:29:26.915 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:26.915 | INFO     | arangodb.visualization.core.data_transformer:transform_graph_data:78 - Transforming ArangoDB data to D3.js format
2025-05-26 11:29:26.915 | INFO     | arangodb.visualization.core.data_transformer:transform_graph_data:122 - Transformed 3 nodes and 2 links
2025-05-26 11:29:26.916 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.916 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.916 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.916 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 3 nodes
2025-05-26 11:29:26.923 | INFO     | arangodb.visualization.core.llm_recommender:__init__:51 - LLMRecommender initialized with model: vertex_ai/gemini-2.5-flash-preview-04-17
2025-05-26 11:29:26.923 | INFO     | arangodb.visualization.core.d3_engine:__init__:106 - LLM recommender initialized
2025-05-26 11:29:26.923 | INFO     | arangodb.visualization.core.performance_optimizer:__init__:55 - PerformanceOptimizer initialized
2025-05-26 11:29:26.924 | INFO     | arangodb.visualization.core.d3_engine:__init__:116 - Performance optimizer initialized
2025-05-26 11:29:26.924 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:26.924 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:26.925 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.925 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.925 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.925 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 3 nodes
2025-05-26 11:29:26.926 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:26.926 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.927 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.927 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.927 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 3 nodes
2025-05-26 11:29:26.928 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:26.928 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.928 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.928 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.928 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 3 nodes
2025-05-26 11:29:26.929 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:26.929 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.930 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.930 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.930 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 3 nodes
2025-05-26 11:29:26.930 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:26.931 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: invalid
2025-05-26 11:29:26.932 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:26.932 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.932 | ERROR    | arangodb.visualization.core.d3_engine:_validate_graph_data:203 - Graph data must contain 'nodes' and 'links' keys
2025-05-26 11:29:26.933 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:26.933 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:26.933 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:26.933 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:26.934 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 3 nodes
2025-05-26 11:29:26.934 | INFO     | arangodb.visualization.core.data_transformer:transform_graph_data:78 - Transforming ArangoDB data to D3.js format
2025-05-26 11:29:26.935 | INFO     | arangodb.visualization.core.data_transformer:transform_graph_data:122 - Transformed 2 nodes and 1 links
2025-05-26 11:29:27.014 | INFO     | arangodb.visualization.core.data_transformer:transform_graph_data:78 - Transforming ArangoDB data to D3.js format
2025-05-26 11:29:27.015 | INFO     | arangodb.visualization.core.data_transformer:transform_graph_data:122 - Transformed 0 nodes and 0 links
2025-05-26 11:29:27.015 | INFO     | arangodb.visualization.core.data_transformer:transform_graph_data:78 - Transforming ArangoDB data to D3.js format
2025-05-26 11:29:27.016 | INFO     | arangodb.visualization.core.data_transformer:transform_graph_data:122 - Transformed 1 nodes and 0 links
2025-05-26 11:29:27.021 | INFO     | arangodb.visualization.core.performance_optimizer:__init__:55 - PerformanceOptimizer initialized
2025-05-26 11:29:27.021 | INFO     | arangodb.visualization.core.performance_optimizer:optimize_graph:69 - Optimizing graph: 2 nodes, 1 edges
2025-05-26 11:29:27.021 | INFO     | arangodb.visualization.core.performance_optimizer:optimize_graph:73 - Graph within size limits, minimal optimization needed
2025-05-26 11:29:27.022 | INFO     | arangodb.visualization.core.performance_optimizer:__init__:55 - PerformanceOptimizer initialized
2025-05-26 11:29:27.022 | INFO     | arangodb.visualization.core.performance_optimizer:optimize_graph:69 - Optimizing graph: 100 nodes, 150 edges
2025-05-26 11:29:27.023 | INFO     | arangodb.visualization.core.performance_optimizer:__init__:55 - PerformanceOptimizer initialized
2025-05-26 11:29:27.023 | INFO     | arangodb.visualization.core.performance_optimizer:optimize_graph:69 - Optimizing graph: 100 nodes, 150 edges
2025-05-26 11:29:27.024 | INFO     | arangodb.visualization.core.performance_optimizer:__init__:55 - PerformanceOptimizer initialized
2025-05-26 11:29:27.030 | INFO     | arangodb.visualization.core.performance_optimizer:__init__:55 - PerformanceOptimizer initialized
2025-05-26 11:29:27.030 | INFO     | arangodb.visualization.core.performance_optimizer:optimize_graph:69 - Optimizing graph: 20 nodes, 0 edges
2025-05-26 11:29:27.030 | INFO     | arangodb.visualization.core.llm_recommender:__init__:51 - LLMRecommender initialized with model: vertex_ai/gemini-2.5-flash-preview-04-17
2025-05-26 11:29:27.031 | INFO     | arangodb.visualization.core.llm_recommender:get_recommendation:253 - Graph analysis complete: 4 nodes, 3 links
2025-05-26 11:29:27.077 | ERROR    | arangodb.visualization.core.llm_recommender:get_recommendation:287 - LLM recommendation failed: litellm.APIConnectionError: File vertex_ai_service_account.json was not found.
Traceback (most recent call last):
  File "/home/graham/workspace/experiments/arangodb/.venv/lib/python3.10/site-packages/litellm/main.py", line 2499, in completion
    model_response = vertex_chat_completion.completion(  # type: ignore
  File "/home/graham/workspace/experiments/arangodb/.venv/lib/python3.10/site-packages/litellm/llms/vertex_ai/gemini/vertex_and_google_ai_studio_gemini.py", line 1429, in completion
    _auth_header, vertex_project = self._ensure_access_token(
  File "/home/graham/workspace/experiments/arangodb/.venv/lib/python3.10/site-packages/litellm/llms/vertex_ai/vertex_llm_base.py", line 135, in _ensure_access_token
    return self.get_access_token(
  File "/home/graham/workspace/experiments/arangodb/.venv/lib/python3.10/site-packages/litellm/llms/vertex_ai/vertex_llm_base.py", line 293, in get_access_token
    raise e
  File "/home/graham/workspace/experiments/arangodb/.venv/lib/python3.10/site-packages/litellm/llms/vertex_ai/vertex_llm_base.py", line 286, in get_access_token
    _credentials, credential_project_id = self.load_auth(
  File "/home/graham/workspace/experiments/arangodb/.venv/lib/python3.10/site-packages/litellm/llms/vertex_ai/vertex_llm_base.py", line 95, in load_auth
    creds, creds_project_id = google_auth.default(
  File "/home/graham/workspace/experiments/arangodb/.venv/lib/python3.10/site-packages/google/auth/_default.py", line 651, in default
    credentials, project_id = checker()
  File "/home/graham/workspace/experiments/arangodb/.venv/lib/python3.10/site-packages/google/auth/_default.py", line 644, in <lambda>
    lambda: _get_explicit_environ_credentials(quota_project_id=quota_project_id),
  File "/home/graham/workspace/experiments/arangodb/.venv/lib/python3.10/site-packages/google/auth/_default.py", line 293, in _get_explicit_environ_credentials
    credentials, project_id = load_credentials_from_file(
  File "/home/graham/workspace/experiments/arangodb/.venv/lib/python3.10/site-packages/google/auth/_default.py", line 125, in load_credentials_from_file
    raise exceptions.DefaultCredentialsError(
google.auth.exceptions.DefaultCredentialsError: File vertex_ai_service_account.json was not found.

2025-05-26 11:29:27.085 | INFO     | arangodb.visualization.core.llm_recommender:__init__:51 - LLMRecommender initialized with model: vertex_ai/gemini-2.5-flash-preview-04-17
2025-05-26 11:29:27.085 | INFO     | arangodb.visualization.core.d3_engine:__init__:106 - LLM recommender initialized
2025-05-26 11:29:27.085 | INFO     | arangodb.visualization.core.performance_optimizer:__init__:55 - PerformanceOptimizer initialized
2025-05-26 11:29:27.085 | INFO     | arangodb.visualization.core.d3_engine:__init__:116 - Performance optimizer initialized
2025-05-26 11:29:27.085 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:27.086 | INFO     | arangodb.visualization.core.data_transformer:transform_graph_data:78 - Transforming ArangoDB data to D3.js format
2025-05-26 11:29:27.086 | INFO     | arangodb.visualization.core.data_transformer:transform_graph_data:122 - Transformed 3 nodes and 2 links
2025-05-26 11:29:27.086 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: tree
2025-05-26 11:29:27.086 | INFO     | arangodb.visualization.core.d3_engine:generate_tree_layout:380 - Generating hierarchical tree layout
2025-05-26 11:29:27.086 | INFO     | arangodb.visualization.core.d3_engine:generate_tree_layout:409 - Tree layout generation complete
2025-05-26 11:29:27.086 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 3 nodes
2025-05-26 11:29:27.087 | INFO     | arangodb.visualization.core.llm_recommender:__init__:51 - LLMRecommender initialized with model: vertex_ai/gemini-2.5-flash-preview-04-17
2025-05-26 11:29:27.087 | INFO     | arangodb.visualization.core.d3_engine:__init__:106 - LLM recommender initialized
2025-05-26 11:29:27.087 | INFO     | arangodb.visualization.core.performance_optimizer:__init__:55 - PerformanceOptimizer initialized
2025-05-26 11:29:27.087 | INFO     | arangodb.visualization.core.d3_engine:__init__:116 - Performance optimizer initialized
2025-05-26 11:29:27.087 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:27.088 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:27.088 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:27.088 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:27.088 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 1 nodes
2025-05-26 11:29:27.089 | INFO     | arangodb.visualization.core.llm_recommender:__init__:51 - LLMRecommender initialized with model: vertex_ai/gemini-2.5-flash-preview-04-17
2025-05-26 11:29:27.089 | INFO     | arangodb.visualization.core.d3_engine:__init__:106 - LLM recommender initialized
2025-05-26 11:29:27.089 | INFO     | arangodb.visualization.core.performance_optimizer:__init__:55 - PerformanceOptimizer initialized
2025-05-26 11:29:27.089 | INFO     | arangodb.visualization.core.d3_engine:__init__:116 - Performance optimizer initialized
2025-05-26 11:29:27.089 | INFO     | arangodb.visualization.core.d3_engine:__init__:121 - D3VisualizationEngine initialized with template_dir: /home/graham/workspace/experiments/arangodb/src/arangodb/visualization/templates
2025-05-26 11:29:27.092 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:144 - Generating visualization with layout: force
2025-05-26 11:29:27.092 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:157 - Optimizing large graph: 2000 nodes, 5000 edges
2025-05-26 11:29:27.092 | INFO     | arangodb.visualization.core.performance_optimizer:optimize_graph:69 - Optimizing graph: 2000 nodes, 5000 edges
2025-05-26 11:29:27.095 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:171 - Applied performance hints: {'use_webgl': False, 'disable_animations': False, 'reduce_labels': False, 'edge_opacity': 1.0, 'force_iterations': 999, 'recommended_renderer': 'svg', 'lod_enabled': False, 'initial_zoom': 1.0, 'min_zoom': 0.5, 'max_zoom': 5}
2025-05-26 11:29:27.095 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:173 - Optimization complete: 1 nodes, 0 edges
2025-05-26 11:29:27.095 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:331 - Generating responsive force-directed layout
2025-05-26 11:29:27.095 | INFO     | arangodb.visualization.core.d3_engine:generate_force_layout:338 - Using responsive force template
2025-05-26 11:29:27.096 | INFO     | arangodb.visualization.core.d3_engine:generate_visualization:187 - Visualization generated successfully for 1 nodes
